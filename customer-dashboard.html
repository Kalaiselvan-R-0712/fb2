<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Customer Dashboard | Stackly Boutique</title>

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600;700&family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    :root{
      --bg:#fafafa; --card:#fff; --text:#222; --muted:#6b6b6b;
      --accent:#f72585; --accent-dark:#d31e69; --glass:rgba(255,255,255,0.65);
      --header-h:88px; --radius:18px;
    }
    [data-theme='dark']{
      --bg:#0b0b0c; --card:#0f0f10; --text:#f1f1f1; --muted:#bdbdbd;
      --accent:#ff6aa3; --accent-dark:#cc578c; --glass:rgba(255,255,255,0.04);
    }

    *{box-sizing:border-box;}
    html,body{height:100%;}
    body{
      margin:0;
      padding-top:var(--header-h);
      font-family:'Poppins',sans-serif;
      background:var(--bg);
      color:var(--text);
      transition:background 0.25s,color 0.25s;
    }

    header{
      position:fixed; top:0; left:0; right:0;
      display:flex; align-items:center; justify-content:space-between;
      padding:0.5rem 1rem;
      background:linear-gradient(180deg,var(--glass),rgba(0,0,0,0));
      backdrop-filter:blur(6px);
      z-index:1200;
      border-bottom:1px solid rgba(0,0,0,0.04);
      flex-wrap:wrap;
    }
    .logo{display:flex;align-items:center;gap:0.6rem;}
    .logo a{display:flex;align-items:center;gap:0.7rem;text-decoration:none;color:var(--accent);font-family:'Playfair Display',serif;font-size:1.4rem;font-weight:700;}
    .logo img{height:40px;border-radius:9999px;}

    nav#mainNav{display:flex;gap:1.2rem;align-items:center;}
    nav#mainNav a{color:var(--text);text-decoration:none;font-weight:600;text-transform:uppercase;font-size:0.95rem;}
    nav#mainNav a:hover, nav#mainNav a[aria-current="page"]{color:var(--accent);}

    .actions{display:flex;gap:0.7rem;align-items:center;}
    .actions button, .actions a{padding:0.45rem 1rem;border-radius:22px;font-weight:600;font-size:0.95rem;border:2px solid transparent;cursor:pointer;transition:0.25s;text-decoration:none;color:inherit;background:transparent;}
    .actions button#themeToggle{border:2px solid var(--text);}
    .actions button#themeToggle:hover{background:var(--accent);color:#fff;border-color:var(--accent);}
    .actions a.home-btn{background:var(--accent);color:#fff;border:2px solid var(--accent);}
    .actions a.home-btn:hover{background:var(--accent-dark);}
    .hamburger{display:none;font-size:1.6rem;background:none;border:none;cursor:pointer;padding:0.2rem 0.5rem;}

    main{max-width:1200px;margin:2rem auto;padding:0 6vw 4rem;}
    .welcome{text-align:center;margin-bottom:1rem;}
    .welcome h1{font-family:'Playfair Display',serif;font-size:2.2rem;margin:0 0 6px;}
    .welcome p{color:var(--muted);margin:0;}

    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1.2rem;margin-top:1rem;}
    .card{
      background:var(--card);border-radius:var(--radius);
      box-shadow:0 8px 30px rgba(0,0,0,0.06);
      padding:1.25rem;transition:transform 0.25s,box-shadow 0.25s;
    }
    .card:hover{transform:translateY(-8px);box-shadow:0 20px 45px rgba(0,0,0,0.12);}
    .card h3{margin:0 0 6px;font-size:1rem;display:flex;align-items:center;gap:0.5rem;font-weight:700;}
    .card .big{font-size:2rem;font-weight:800;margin:6px 0;}
    .card p.small{color:var(--muted);margin:0;font-size:0.92rem;}

    /* Graph Section */
    .chart-container{
      background:var(--card);
      border-radius:var(--radius);
      padding:1.5rem;
      margin-top:2rem;
      box-shadow:0 8px 30px rgba(0,0,0,0.06);
    }
    .chart-container h2{
      margin-bottom:1rem;
      font-family:'Playfair Display',serif;
      font-size:1.3rem;
    }
    canvas{width:100%!important;height:360px!important;}

    .actions-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;margin-top:1rem;}
    .action-btn{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:1rem;border-radius:14px;background:var(--card);cursor:pointer;border:1px solid rgba(0,0,0,0.04);transition:transform .2s,box-shadow .2s;}
    .action-btn:hover{transform:translateY(-6px);box-shadow:0 12px 30px rgba(0,0,0,0.08);}
    .action-btn i{font-size:1.5rem;margin-bottom:0.4rem;}

    footer { background:var(--card); padding:2.5rem 6vw; text-align:center; color:var(--muted); font-size:0.95rem; margin-top:4rem; }
footer .social-icons { margin-bottom:1.4rem; font-size:1.6rem; display:flex; justify-content:center; gap:1.2rem; }
footer .social-icons a { color:var(--muted); transition:0.3s; }
footer .social-icons a:hover { color:var(--accent); }
    @media(max-width:1024px){.grid{grid-template-columns:repeat(2,1fr);} .actions-grid{grid-template-columns:repeat(2,1fr);} }
    @media(max-width:768px){.grid{grid-template-columns:1fr;} .actions-grid{grid-template-columns:1fr 1fr;}}
  </style>
</head>
<body>

<header>
  <div class="logo">
    <a href="index.html"><img src="assets/logo/the_stackly_logo.webp" alt="Stackly Logo"><span>STACKLY</span></a>
  </div>
  <nav id="mainNav">
    <a href="index.html">Home</a>
    <a href="shop.html">Shop</a>
    <a href="about.html">About</a>
    <a href="contact.html">Contact</a>
    <a href="customer-dashboard.html" aria-current="page">Customer Dashboard</a>
  </nav>
  <div class="actions">
    <button id="themeToggle"><i class="fa-solid fa-moon"></i></button>
    <a href="index.html" class="home-btn">Homepage</a>
    <button id="logoutBtn">Logout</button>
  </div>
</header>

<main>
  <section class="welcome">
    <h1>Welcome, <span id="userName" style="color:var(--accent)">Customer</span> ðŸ‘‹</h1>
    <p>Your personalized Stackly dashboard overview.</p>
  </section>

  <section class="grid">
    <div class="card">
      <h3><i class="fa-solid fa-server" style="color:var(--accent)"></i> Cloud Usage</h3>
      <div class="big">78%</div>
      <p class="small">of your allocated resources used</p>
    </div>
    <div class="card">
      <h3><i class="fa-solid fa-chart-line" style="color:#4fc3f7"></i> Monthly Growth</h3>
      <div class="big">+23%</div>
      <p class="small">compared to last month</p>
    </div>
    <div class="card">
      <h3><i class="fa-solid fa-wallet" style="color:#34d399"></i> Billing Summary</h3>
      <div class="big">$124.00</div>
      <p class="small">Next payment due 10 Nov</p>
    </div>
  </section>

  <!-- Charts Section -->
  <section class="chart-container">
    <h2>Usage Overview</h2>
    <canvas id="usageChart"></canvas>
  </section>

  <section class="chart-container">
    <h2>Billing Trend</h2>
    <canvas id="billingChart"></canvas>
  </section>

  <section style="margin-top:18px;">
    <h2 style="font-family:'Playfair Display',serif;font-size:1.15rem;">Quick Actions</h2>
    <div class="actions-grid">
      <button class="action-btn"><i class="fa-solid fa-cloud-arrow-up" style="color:var(--accent)"></i><span>Upload Files</span></button>
      <button class="action-btn"><i class="fa-solid fa-database" style="color:#60a5fa"></i><span>Manage Storage</span></button>
      <button class="action-btn"><i class="fa-solid fa-headset" style="color:#34d399"></i><span>Support Tickets</span></button>
      <button class="action-btn"><i class="fa-solid fa-gear" style="color:#f59e0b"></i><span>Account Settings</span></button>
    </div>
  </section>
</main>

<footer>
  <div class="social-icons" style="margin-bottom:10px;font-size:1.2rem;">
    <a href="https://mail.google.com"><i class="fa-solid fa-envelope"></i></a>
    <a href="https://www.linkedin.com"><i class="fab fa-linkedin-in"></i></a>
    <a href="https://x.com"><i class="fab fa-twitter"></i></a>
    <a href="https://www.facebook.com"><i class="fab fa-facebook-f"></i></a>
    <a href="https://www.instagram.com"><i class="fab fa-instagram"></i></a>
  </div>
  <p>Â© <span id="year"></span> Stackly. All rights reserved.</p>
</footer>

<script>
  document.getElementById('year').textContent = new Date().getFullYear();

  const root = document.documentElement;
  const themeToggle = document.getElementById('themeToggle');
  function applyTheme(t){
    if(t==='dark'){root.setAttribute('data-theme','dark');themeToggle.innerHTML='<i class="fa-solid fa-sun"></i>';}
    else{root.removeAttribute('data-theme');themeToggle.innerHTML='<i class="fa-solid fa-moon"></i>';}
  }
  const savedTheme=localStorage.getItem('stackly-theme')||(window.matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light');
  applyTheme(savedTheme);
  themeToggle.addEventListener('click',()=>{
    const current=root.getAttribute('data-theme')==='dark'?'light':'dark';
    applyTheme(current);localStorage.setItem('stackly-theme',current);updateChartsTheme(current);
  });

  const user=JSON.parse(localStorage.getItem('loggedInUser'));
  const nameEl=document.getElementById('userName');
  if(!user||user.role!=='customer'){window.location.href='login.html';}
  else{nameEl.textContent=user.name||'Customer';}
  document.getElementById('logoutBtn').addEventListener('click',()=>{localStorage.removeItem('loggedInUser');window.location.href='login.html';});

  // === Chart.js Section ===
  const ctx1=document.getElementById('usageChart');
  const ctx2=document.getElementById('billingChart');

  let usageChart, billingChart;

  function createCharts(theme){
    const textColor=theme==='dark'?'#f1f1f1':'#222';
    const gridColor=theme==='dark'?'rgba(255,255,255,0.1)':'rgba(0,0,0,0.1)';
    const accent=getComputedStyle(root).getPropertyValue('--accent').trim();

    if(usageChart) usageChart.destroy();
    if(billingChart) billingChart.destroy();

    usageChart=new Chart(ctx1,{
      type:'line',
      data:{
        labels:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct'],
        datasets:[{
          label:'Usage (%)',
          data:[40,50,55,65,70,78,82,85,88,92],
          borderColor:accent,
          backgroundColor:'rgba(247,37,133,0.15)',
          fill:true,
          tension:0.4,
          pointRadius:4,
          pointBackgroundColor:accent
        }]
      },
      options:{
        responsive:true,
        scales:{
          y:{ticks:{color:textColor},grid:{color:gridColor}},
          x:{ticks:{color:textColor},grid:{color:gridColor}}
        },
        plugins:{legend:{labels:{color:textColor}}}
      }
    });

    billingChart=new Chart(ctx2,{
      type:'bar',
      data:{
        labels:['Apr','May','Jun','Jul','Aug','Sep','Oct'],
        datasets:[{
          label:'Billing ($)',
          data:[90,100,105,110,120,124,130],
          backgroundColor:accent
        }]
      },
      options:{
        responsive:true,
        scales:{
          y:{ticks:{color:textColor},grid:{color:gridColor}},
          x:{ticks:{color:textColor},grid:{color:gridColor}}
        },
        plugins:{legend:{labels:{color:textColor}}}
      }
    });
  }

  function updateChartsTheme(theme){
    createCharts(theme);
  }

  createCharts(savedTheme);
</script>
</body>
</html>
